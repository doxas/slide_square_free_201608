
#### 自己紹介

杉本 雅広

wgld.org などの運営してます。ウェブ上では doxas の名前で活動。

![](sample.png)

---

#### 今日のおはなし

今日は WebVR について、あらためて基本的なところをお話します。

WebVR とは結局のところなんなのか、といったような基礎的な部分が中心の内容になっています。

---

#### 

---

#### 空前の VR ブーム

最近は VR 関連の話題をよく見聞きするようになりました。

みなさんも、テレビやウェブ上で、VR についてなにかしらの情報を見たことをきっかけにして、めぐりめぐって今この場に来てくださっているのだと思います。そんな VR の盛り上がりに背中を押されるようにして登場してきたのが他ならぬ WebVR です。

---

#### WebVR API

WebVR は、WebGL や WebAudio、あるいは WebRTC などと同じ **JavaScript の API** です。まずはこの点を念頭に置くことが大切です。

よくある誤解として、ウェブブラウザで VR を実現すること＝ WebVR だと捉えられてしまうことが多いです。しかし、実際にはウェブブラウザで VR を実現することそのものは、WebVR とは *実はなんの関係もありません*。

---

#### WebVR API

たとえば、これまでにもスマートフォンなどのジャイロセンサーを利用して、VR 風のアプリケーションをブラウザ上で動かすことはできました。

しかしこれは、ジャイロセンサーを利用した VR コンテンツ、というだけであって WebVR を利用しているわけではないのですね。

---

#### MobileVR on the Web

※実装例

---

#### WebVR API

WebVR の API をきちんと読んでみると、WebVR API は、モバイル端末でジャイロセンサーを利用して実現する VR コンテンツとは、実は何の関係も無いのだということがわかります。

それでは、肝心の WebVR API とは、いったい何を行うことができる API なのでしょうか。これがあることによって、どんなことが嬉しいんでしょう。

---

#### WebVR API

WebVR API が行ってくれることは、大別してふたつあります。

ひとつは、Oculus Rift や HTC Vive のようなヘッドマウントディスプレイの各種センサーの情報を取得すること。

そしてもうひとつが、ヘッドマウントディスプレイへの映像出力の切り替えです。

---

#### WebVR API

このふたつの機能を見れば、WebVR がどのようなものであるかはなんとなく想像が付くのではないでしょうか。

要するに、WebVR はセンサー情報を取得したり映像を出力したりといった、ヘッドマウントディスプレイとブラウザとの間の *インターフェースを提供してくれるだけ* なんですね。

実際に何を描画するのか、あるいはセンサーの値を何に使うのかは、WebVR API とは直接関係ないということになります。

---

#### WebVR API

* HMD のジャイロセンサーなどの値を取得できる
* HMD の両眼ディスプレイに映像を出力できる
* それ以上でもそれ以下でもない

※HMD はヘッドマウントディスプレイの略です

---

#### 

---

#### どうやって使うのか

WebVR は現在策定が進められている API で、W3C などから正式な勧告を受けたわけではありません。ですから、今後も仕様がどんどん変わっていくでしょうし、同時に進化も続いていくと考えられます。

また、この新しい API は、対応しているブラウザがそもそもかなり限定されます。

現状（２０１６年夏）では、Firefox や Chrome の対応ビルド版、GearVR の WebVR 対応ブラウザのみが WebVR を実行できます。

---

#### どうやって使うのか

WebVR API は HMD との連携を可能にする API ですから、対応するブラウザだけがあっても意味がありません。WebVR API がデバイスとして認識できる、対応した HMD が必要です。

ブラウザを準備したり、HMD を手に入れる必要があったり……現状では他の API と比較してかなり敷居が高いと言えますね。

※当然ながら VR Ready な PC も必要です

---

#### どうやって使うのか

WebVR API 対応ブラウザと HMD が両方とも手に入ったら、ブラウザを開き、HMD の電源を入れ、対応する JavaScript のコードを実行するウェブページを開きます。

なんと残念なことに、この時点でもまだ HMD には VR コンテンツは表示されません。

対応ブラウザを使っているはずなのに、いったいどうしてなんでしょう。

---

#### どうやって使うのか

実は、HMD への映像出力は、既存の JavaScript の API で言うとフルスクリーン API のような挙動をします。

つまり、フルスクリーン API がそうであるように、ページがロードされた直後にユーザーの許可無くダイレクトに HMD へ映像を出力することはできないのですね。

クリックや、キーの入力など、なにかしらのユーザーの反応を受けてから、そこでやっと初めて HMD に絵が出ます。

---

#### 既存 API の置き換え

ここで勘のいい人なら感じたかもしれませんが、既存のフルスクリーン API が持つ役割を、VR 用に置き換えたような API が WebVR には含まれています。

フルスクリーンの他にも、フレームレート（ディスプレイの更新頻度）の高い HMD 向けに用意された専用の requestAnimationFrame などが定義されています。

---

#### 既存 API の置き換え

HMD は、つまるところセンサー付きのディスプレイです。最近では、コントローラやルームスケール用のベースステーションが付随する場合もあります。

WebVR はこれらの様々なセンサー類、そして HMD 内蔵ディスプレイとやりとりする低レベルな部分を担保してくれる API です。用途・状況に応じて、JavaScript の既存の API の代わりに使えるような、高精度・高精細な専用のメソッド等を提供してくれるのですね。

---

#### WebVR が持つ思想

VR では、遅延の無い高速なレンダリングや、センサーの情報を正確にトレースすることが求められます。

既存のウェブのインターフェースや API でも VR コンテンツを作ることができないわけではありませんが、十分なパフォーマンスは期待できません。

---

#### WebVR が持つ思想

WebVR を利用すれば、既存のウェブの API では実現することができない、高精度なセンサー情報の取得も高リフレッシュレートなレンダリングも行うことができます。

*ウェブでも高品質な VR 体験を実現したい* という想いが、この API には込められているのですね。

---

#### WebVR が持つ思想

WebGL なんかもそうですが、いわゆる普通の JavaScript の開発とはかなり毛色が違います。なぜなら、API は *本格的な VR 体験がウェブで実現できること* を目指しているものだからです。

本格志向なだけに、VR についてしっかり勉強しないと戦えないフィールドだろうなあとは感じます。

---

#### WebVR が持つ思想

それでも、かなり扱いやすいシンプルな API になってると思います。個人的には、WebGL より全然簡単だと思いますね。

ぜひみなさんも、VR そのもの、あるいはその実現手段のひとつである WebVR に興味を持ったのなら、積極的に調べたり実装に挑戦したりしてみてください。

---

#### WebVR が持つ思想

きっとこれまでのウェブには見られなかったような、新しい感動や感激がそこにはあると思います。

そんな激変のウェブの中に生きているというのは、なんとも幸せなことなのかもしれないですね。


おわり


